# 系统架构

## 🏗️ 整体架构图
┌─────────────────┐ ┌──────────────────┐ ┌─────────────────┐
│ 用户界面 │ │ 调度中心 │ │ 计算节点 │
│ │ │ │ │ │
│ • 任务提交 │◄──►│ • 任务队列 │◄──►│ • 闲置检测 │
│ • 结果查看 │ │ • 节点管理 │ │ • 安全执行 │
│ • 状态监控 │ │ • 结果存储 │ │ • 资源清理 │
└─────────────────┘ └──────────────────┘ └─────────────────┘

## 🔄 数据流
1. **提交阶段**：用户 → 界面 → 调度中心（生成任务ID）
2. **分配阶段**：调度中心 → 闲置节点（推送任务）
3. **执行阶段**：节点安全执行 → 返回结果
4. **返回阶段**：结果 → 调度中心 → 用户界面

## 📦 核心组件

### idle-sense（闲置检测库）
- 跨平台状态收集（Windows/macOS）
- 智能闲置判定算法（我们的核心创新）
- 资源使用率监控

### 调度中心（Scheduler）
- FastAPI Web服务
- 内存任务队列（先到先得）
- 节点状态跟踪
- 结果临时存储

### 计算节点（Node）
- 闲置状态自检
- 安全代码执行环境
- 自动资源清理
- 心跳报告机制

## 🔐 安全架构
- 任务隔离执行（临时目录）
- 执行时间限制（默认5分钟）
- 网络访问控制（默认禁止）
- 自动文件清理（任务完成即删除）
